<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.8.0"><meta name=author content="Jérémie Deray"><meta name=description content="In this post, we will see how we can easily manage our personal configuration files - a.k.a. dotfiles. Yeah dotfiles, named after there common ~/.my_config form, you know, all of those small configuration files lying across our $HOME."><link rel=alternate hreflang=en-us href=https://artivis.github.io/post/2020/dotfiles/><meta name=theme-color content="hsl(115, 82%, 48%)"><script src=/js/mathjax-config.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css crossorigin=anonymous title=hl-light disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap"><link rel=stylesheet href=/css/academic.css><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/images/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/images/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_192x192_fill_lanczos_center_2.png><link rel=canonical href=https://artivis.github.io/post/2020/dotfiles/><meta property="twitter:card" content="summary"><meta property="og:site_name" content="Home to artivis"><meta property="og:url" content="https://artivis.github.io/post/2020/dotfiles/"><meta property="og:title" content="Managing dotfiles | Home to artivis"><meta property="og:description" content="In this post, we will see how we can easily manage our personal configuration files - a.k.a. dotfiles. Yeah dotfiles, named after there common ~/.my_config form, you know, all of those small configuration files lying across our $HOME."><meta property="og:image" content="https://artivis.github.io/images/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_512x512_fill_lanczos_center_2.png"><meta property="twitter:image" content="https://artivis.github.io/images/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2020-06-01T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-06T13:07:17-04:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://artivis.github.io/post/2020/dotfiles/"},"headline":"Managing dotfiles","datePublished":"2020-06-01T00:00:00Z","dateModified":"2020-06-06T13:07:17-04:00","author":{"@type":"Person","name":"Jérémie Deray"},"publisher":{"@type":"Organization","name":"Home to artivis","logo":{"@type":"ImageObject","url":"https://artivis.github.io/images/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_192x192_fill_lanczos_center_2.png"}},"description":"In this post, we will see how we can easily manage our personal configuration files - a.k.a. dotfiles. Yeah dotfiles, named after there common ~/.my_config form, you know, all of those small configuration files lying across our $HOME."}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"hsl(115, 82%, 48%)","text":"#292a2d"},"button":{"background":"#292a2d","text":"hsl(115, 82%, 48%)"}},"theme":"classic","content":{"message":"This website uses cookies to ensure you get the best experience on our website.","dismiss":"Got it!","link":"Learn more","href":"https://www.cookiesandyou.com"}})});</script><title>Managing dotfiles | Home to artivis</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=dark><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/><a href=https://artivis.github.io/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ cd /home/</span>
<span class=logo__cursor style=background-color:#27df16;animation-duration:2s></span></div></a></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Home to artivis</a></div><div class="navbar-collapse main-menu-item collapse justify-content-end" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class="nav-link active" href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/project><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/publication><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/about><span>About</span></a></li><li class=nav-item><a class=nav-link href=/contact><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item>|</li><li class=nav-item><a class="nav-link js-search" href=#><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class="nav-link js-theme-selector" data-toggle=dropdown aria-haspopup=true><i class="fas fa-adjust" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav><article class=article><div class="article-container pt-3"><h1>Managing dotfiles</h1><p class=page-subtitle>Because there is no place like $HOME</p><div class=article-metadata><span class=article-date>Last updated on
Jun 6, 2020</span>
<span class=middot-divider></span><span class=article-reading-time>6 min read</span></div></div><div class=article-container><div class=article-style><p>In this post, we will see how we can easily manage our personal
configuration files - a.k.a. dotfiles.
Yeah dotfiles, named after there common <code>~/.my_config</code> form, you know,
all of those small configuration files lying across our $HOME.</p><blockquote><p>Because there is no place like $HOME</p></blockquote><p>Because we are spending so much time on our machine, be it for work or for fun
(both at the same time if you are lucky),
we love to tweak our environment to our taste and needs.
Change the UX, create some aliases, use some dark theme and what not,
most if not all of these are saved in some configuration files somewhere.
And since we spent so much time making a home for ourselves,
wouldn&rsquo;t it be great if we could quickly set it up again on a different computer?
Change the house but keep the furniture and decorations?
This is precisely what we are going to set up here.</p><hr><h1 id=content>Content</h1><ul><li><a href=#picking-a-dotfiles-manager>Picking a dotfiles manager</a></li><li><a href=#building-our-castle>Building our castle</a></li><li><a href=#quickly-setting-up-a-new-machine>Quickly setting up a new machine</a></li><li><a href=#disposable-tiny-home>Disposable tiny home</a></li></ul><hr><h1 id=picking-a-dotfiles-manager>Picking a dotfiles manager</h1><p>Looking on the web for a dotfiles manager, you may find many of them -
see a whole
<a href=https://dotfiles.github.io/utilities/ target=_blank rel=noopener>list of them here</a>. Most of them work off
the same principles, being a small set of utils to help manage our dotfiles.
Management includes most importantly versioning, often through git and
the installation of the files to their correct location as they are more than
often expected to be found at a given path.
You may want to give a look at the aforementioned list of managers
and pick one that best answers your needs and expectations.
Note that many are interchangeable.</p><p>In this post we settled using
<a href=https://github.com/andsens/homeshick target=_blank rel=noopener><code>homeshick</code></a>.
There are two main reasons for this choice.
Firstly, it is entirely written in bash, making it usable virtually anywhere.
Secondly, it &lsquo;installs&rsquo; dotfiles on our system using symlinks rather than
hard copies. The files thus exist in a single place.
Some other nice features includes, being git-based, being cli-based,
supporting multi dotfiles repos.
It has to be noted tho that the project is not in a really active
development and not very feature rich compared to other solutions.
It is a thin-layer that does the job.</p><p>Alright so how do we get started?</p><h1 id=building-our-castle>Building our castle</h1><p><code>homeshick</code> relies around the concept of <em>castles</em> which are nothing
more than git repositories.
A castle contains all of our dotfiles which are organized with the same
layout as our home directory.
But before building our castle, we need to install the appropriate tool.
To install <code>homeshick</code>, nothing easier, we simply clone its repository
in our home:</p><pre><code class=language-bash>$ git clone https://github.com/andsens/homeshick.git $HOME/.homesick/repos/homeshick
</code></pre><p>And we are done. Now to use it, we only have to source it,
e.g. directly in our <code>.bashrc</code>,</p><pre><code class=language-bash>$ echo &quot;source ~/.homesick/repos/homeshick/homeshick.sh&quot; &gt;&gt; ~/.bashrc
</code></pre><p>We can also source its tab completion tool to ease our life,</p><pre><code class=language-bash>$ echo &quot;source ~/.homesick/repos/homeshick/completions/homeshick-completion.bash&quot; &gt;&gt; ~/.bashrc
</code></pre><p>Alright, we are done with the installation,
let us start creating the said castle.</p><p>First we create a new local git repo through <code>homeshick</code> cli tool,</p><pre><code class=language-bash>$ homeshick generate dotfiles
</code></pre><p>This creates an empty castle named &lsquo;dotfiles&rsquo; in
<code>~/.homesick/repos/dotfiles/</code>.
To populate our castle with a dotfile, we make use of the &lsquo;track&rsquo; command:</p><pre><code class=language-bash>$ homeshick track {castle} {dotfile}
</code></pre><p>To track our first file, say e.g. <code>.bashrc</code>, we simply issue,</p><pre><code class=language-bash>$ homeshick track dotfiles ~/.bashrc
</code></pre><p>The command copies the file in our castle at
<code>~/.homesick/repos/dotfiles/home/.bashrc</code> and replaces the original file
with a symlink to the copy.</p><p>Now all we have to do is to commit our change and save our castle online,</p><p>To move to our local repository, we enter,</p><pre><code class=language-bash>$ homeshick cd dotfiles
</code></pre><p>and we can now use the usual git commands,</p><pre><code class=language-bash>$ git add .
$ git commit -m 'add .bashrc'
</code></pre><p>Let us save our castle online, e.g. on GitHub,</p><pre><code class=language-bash>$ git remote add origin git@github.com:user/dotfiles.git
$ git push -u origin master
</code></pre><p>We may now repeat this operation for each and every configuration file
we would like to save.
With our castle safely backed up online, we will now see
how we can quickly set up our environment on a new machine.</p><h1 id=quickly-setting-up-a-new-machine>Quickly setting up a new machine</h1><p>Whether you bought a new computer or nuked your old hardware with a
fresh new distro, you will now witness the true power of <code>homeshick</code>.</p><p>To install our cosy environment on a fresh distro,
all we have to do is,</p><ol><li>Install <code>homeshick</code><pre><code class=language-bash>$ git clone https://github.com/andsens/homeshick.git $HOME/.homesick/repos/homeshick
$ source ~/.homesick/repos/homeshick/homeshick.sh
</code></pre></li><li>Import our castle<pre><code class=language-bash>$ homeshick clone git@github.com:user/dotfiles.git
</code></pre></li><li>Let <code>homeshick</code> works its magic<pre><code class=language-bash>$ homeshick link dotfiles
</code></pre></li></ol><p>Voila! Home sweet home.</p><p>Of course this post is only a quick overview of a given dotfiles manager.
I won&rsquo;t detail here all of its options and features
and let you discover them for yourself in its
<a href=https://github.com/andsens/homeshick/wiki target=_blank rel=noopener>wiki</a>.
As mentioned previously many dotfiles managers rely on a git repository and the
same layout as <code>homeshick</code> so you can get started with it and later move to
another one which better fits your needs.</p><p>At this point you may be wondering if this is really worth it given that you probably
install a fresh distro every 2 years or so and completely change hardware even less
frequently.
Well, fellow developer, aren&rsquo;t you using containers?
If not, you definitely should consider it and check
<a href=/post/2020/lxc>this other post</a>
where I detail a development workflow for
<a href=https://www.ros.org/ target=_blank rel=noopener>ROS</a> in
<a href=https://linuxcontainers.org/ target=_blank rel=noopener>LXD</a>.</p><h1 id=disposable-tiny-home>Disposable tiny home</h1><p>If you are like me, trying your best to keep a tidy laptop while
messing around with plenty of different software toys,
then you may have had one of these days during which you spawn several containers.
Containers in which we don&rsquo;t have our sweet bash aliases;
on our very own machine!
But thanks to <code>homeshick</code> we can now start up a fresh
container and have it mimic <code>$HOME</code> in a matter of seconds!
Let me demonstrate it for you with a LXD container,</p><pre><code class=language-bash>$ lxc launch ubuntu:20.04 tmp-20-04
$ lxc profile add castle tmp-20-04
$ lxc ubuntu tmp-20-04
</code></pre><p>Ahhh, what a cozy tiny disposable home!</p><p>That seemed too easy to you? Alright I confess, I used some of my own aliases here.
But isn&rsquo;t it what this whole post is about?
Note that the above 3 lines really boils down to,</p><pre><code class=language-bash>$ lxc launch ubuntu:20.04 tmp-20-04
$ lxc exec tmp-20-04 -- sudo --login --user ubuntu
...
$ git clone https://github.com/andsens/homeshick.git $HOME/.homesick/repos/homeshick
$ source ~/.homesick/repos/homeshick/homeshick.sh
$ homeshick clone git@github.com:user/dotfiles.git
$ homeshick link dotfiles
</code></pre><p>With this example,
I hope that I managed to offer you a glimpse at the power of <code>homeshick</code>
(and more generally of dotfiles managers),
especially when coupled to a containerized workflow.</p><p>Before closing this post, let me give you one last tip.
Because we made our containerized workflow rather seamless with our
host, it can be easy to lose track of which shell is in a container and which
is not. To differentiate them, add the following to your <code>.bashrc</code>:</p><pre><code class=language-bash>function prompt_lxc_header()
{
  if [ -e /dev/lxd/sock ]; then
    echo &quot;[LXC] &quot;;
  fi
}

PS1='$(prompt_lxc_header)'$PS1
</code></pre><p>When used in a container,
a shell prompt in the said container will now look something like:</p><pre><code class=language-bash>[LXC] ubuntu@tmp-20-04:~$
</code></pre><p>No more confusion 👍</p></div><div class=article-tags><a class="badge badge-light" href=/tag/lxc/>LXC</a>
<a class="badge badge-light" href=/tag/lxd/>LXD</a>
<a class="badge badge-light" href=/tag/tutorial/>tutorial</a>
<a class="badge badge-light" href=/tag/dotfiles/>dotfiles</a>
<a class="badge badge-light" href=/tag/home/>HOME</a>
<a class="badge badge-light" href=/tag/homeshick/>homeshick</a></div><div class=share-box aria-hidden=true><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https://artivis.github.io/post/2020/dotfiles/&text=Managing%20dotfiles" target=_blank rel=noopener class=share-btn-twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https://artivis.github.io/post/2020/dotfiles/&t=Managing%20dotfiles" target=_blank rel=noopener class=share-btn-facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=Managing%20dotfiles&body=https://artivis.github.io/post/2020/dotfiles/" target=_blank rel=noopener class=share-btn-email><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https://artivis.github.io/post/2020/dotfiles/&title=Managing%20dotfiles" target=_blank rel=noopener class=share-btn-linkedin><i class="fab fa-linkedin-in"></i></a></li><li><a href="https://web.whatsapp.com/send?text=Managing%20dotfiles%20https://artivis.github.io/post/2020/dotfiles/" target=_blank rel=noopener class=share-btn-whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=https://artivis.github.io/post/2020/dotfiles/&title=Managing%20dotfiles" target=_blank rel=noopener class=share-btn-weibo><i class="fab fa-weibo"></i></a></li></ul></div><div class="article-widget content-widget-hr"><h3>Related</h3><ul><li><a href=/post/2020/lxc/>ROS Noetic development workflow in LXC</a></li><li><a href=/post/2020/my-website/>My website</a></li><li><a href=/post/2020/pi-zero/>SSH the Raspberry Pi Zero over USB</a></li></ul></div></div></article><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js integrity="sha256-lyWCDMnMeZiXRi7Zl54sZGKYmgQs4izcT7+tKc+KUBk=" crossorigin=anonymous title=mermaid></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin=anonymous></script><script>const code_highlighting=true;</script><script>const isSiteThemeDark=true;</script><script>const search_config={"indexURI":"/index.json","minLength":1,"threshold":0.3};const i18n={"no_results":"No results found","placeholder":"Search...","results":"results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks"};</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/js/academic.min.37431be2d92d7fb0160054761ab79602.js></script><div class=container><footer class=site-footer><p class=powered-by>Jérémie Deray © 2020
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>